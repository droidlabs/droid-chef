[mysqld]

# Charset and Collation

character-set-server = <%= node['mysql']['tunable']['character-set-server'] %>
collation-server     = <%= node['mysql']['tunable']['collation-server'] %>

<%- if node['mysql']['tunable']['lower_case_table_names'] %>
lower_case_table_names = <%= node['mysql']['tunable']['lower_case_table_names'] %>
<%- end %>

<%- if node['mysql']['tunable']['event_scheduler'] %>
event_scheduler      = <%= node['mysql']['tunable']['event_scheduler'] %>
<%- end %>

<%- if node['mysql']['tunable']['skip-character-set-client-handshake'] %>
skip-character-set-client-handshake
<%- end %>

<%- if (node['mysql']['tunable']['lc_messages_dir'] && node['mysql']['tunable']['lc_messages']) %>
lc_messages_dir	    = <%= node['mysql']['lc_messages_dir'] %>
lc_messages	    = <%= node['mysql']['lc_messages'] %>
<%- elsif (node['mysql']['tunable']['languages']) %>
languages	    = <%= node['mysql']['tunable']['languages'] %>
<%- end %>

####################################################################################

#
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.

bind-address            = <%= node['mysql']['bind_address'] %>

#
# * Fine Tuning
#

key_buffer_size         = <%= node['mysql']['tunable']['key_buffer_size'] %>
max_allowed_packet      = <%= node['mysql']['tunable']['max_allowed_packet'] %>

# thread_stack            = <%= node['mysql']['tunable']['thread_stack'] %>
# thread_cache_size       = <%= node['mysql']['tunable']['thread_cache_size'] %>
# sort_buffer_size        = <%= node['mysql']['tunable']['sort_buffer_size'] %>
# read_buffer_size        = <%= node['mysql']['tunable']['read_buffer_size'] %>
# read_rnd_buffer_size    = <%= node['mysql']['tunable']['read_rnd_buffer_size'] %>
# join_buffer_size        = <%= node['mysql']['tunable']['join_buffer_size'] %>

# auto-increment-increment = <%= node['mysql']['auto-increment-increment'] %>
# auto-increment-offset    = <%= node['mysql']['auto-increment-offset'] %>

# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched

myisam-recover          = <%= node['mysql']['tunable']['myisam-recover'] %>

# max_connections         = <%= node['mysql']['tunable']['max_connections'] %>
# max_connect_errors      = <%= node['mysql']['tunable']['max_connect_errors'] %>
# concurrent_insert       = <%= node['mysql']['tunable']['concurrent_insert'] %>
# connect_timeout         = <%= node['mysql']['tunable']['connect_timeout'] %>
# wait_timeout            = <%= node['mysql']['tunable']['wait_timeout'] %>
# net_read_timeout        = <%= node['mysql']['tunable']['net_read_timeout'] %>
# net_write_timeout       = <%= node['mysql']['tunable']['net_write_timeout'] %>
# back_log                = <%= node['mysql']['tunable']['back_log'] %>

#
# * InnoDB
#
# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.
# Read the manual for more InnoDB related options. There are many!
# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.
#skip-innodb

innodb_buffer_pool_size = <%= node['mysql']['tunable']['innodb_buffer_pool_size'] %>

